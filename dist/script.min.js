let pokemonRepository = function () { let e = []; function t(e) { let t = document.querySelector(".pokemon-list"), r = document.createElement("li"); r.classList.add("list-group-item", "border-0"); let o = document.createElement("button"); "mr-mime" === e.name ? o.innerText = "Mr. Mime" : "nidoran-f" === e.name ? o.innerText = "Nidoran - female" : "nidoran-m" === e.name ? o.innerText = "Nidoran - male" : "farfetchd" === e.name ? o.innerText = "Farfetch'd" : o.innerText = e.name, o.classList.add("btn", "btn-custom", "btn-block", "text-capitalize"), o.setAttribute("data-toggle", "modal"), o.setAttribute("data-target", "#pokeModal"), t.appendChild(r), r.appendChild(o), o.addEventListener("click", function () { n(e) }) } function n(e) { a(e).then(function () { r(e) }) } function r(e) { let t = document.querySelector(".modal-title"); "mr-mime" === e.name ? t.innerText = "Mr. Mime" : "nidoran-f" === e.name ? t.innerText = "Nidoran - female" : "nidoran-m" === e.name ? t.innerText = "Nidoran - male" : "farfetchd" === e.name ? t.innerText = "Farfetch'd" : t.innerText = e.name; let n = document.querySelector(".pokemon-image"); n.src = e.imageUrl, n.alt = e.name; document.querySelector(".pokemon-id").innerText = "PokeDex Number: " + e.id; document.querySelector(".pokemon-height").innerText = "Height: " + e.height + "m"; document.querySelector(".pokemon-weight").innerText = "Weight: " + e.weight + " kgs"; let r = document.querySelector(".pokemon-type"); e.types[1] ? r.innerText = "Types: " + (e.types[0].type.name.charAt(0).toUpperCase() + e.types[0].type.name.slice(1)) + " & " + (e.types[1].type.name.charAt(0).toUpperCase() + e.types[1].type.name.slice(1)) : r.innerText = "Type: " + (e.types[0].type.name.charAt(0).toUpperCase() + e.types[0].type.name.slice(1)) } function o(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("Error, must be an Object") } function i() { return e } function a(e) { return fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { e.imageUrl = t.sprites.other.dream_world.front_default, e.height = t.height / 10, e.types = t.types, e.weight = t.weight / 10, e.id = t.id }).catch(function (e) { console.error(e) }) } return { add: o, getAll: i, addListItem: t, loadList: function e() { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { let t = { name: e.name, detailsUrl: e.url }; o(t), console.log(t) }) }).catch(function (e) { console.error(e) }) }, loadDetails: a, showDetails: n, showModal: r, search: function n(r) { document.querySelector(".pokemon-list").innerHTML = ""; e.filter(e => e.name.includes(r.toLowerCase())).forEach(e => { t(e) }) } } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) }); const searchInput = document.getElementById("name-input"); searchInput.addEventListener("input", e => { pokemonRepository.search(e.target.value) });